# FreeRTOS Counting Semaphores

## FreeRTOS计数信号量

正如二进制信号量可以被认为是长度为1的队列一样，计数信号量可以被看做长度大于1的队列。同样，信号量的用户对存储在队列中的数据不感兴趣--只关心队列是否为空。

计数信号量通常用于以下两种场景: 

1. 计数事件
   
  在该场景中，事件处理程序将在每次事件发生时“给出”一个信号量（增加信号量计数值），并且处理程序任务将在每次处理事件时“获取”一个信号量（减少信号量计数值）。 因此，计数值是已发生事件数与已处理事件数之差。 在这种情况下，在创建信号量时计数值应该为零。 

2. 资源管理

  在该场景中，计数值指示可用资源的数量。要获得资源的控制权，任务必须首先获得信号量-递减信号量计数值。当计数值达到零时，没有可用资源。当任务完成with资源时，它会“返回”信号量-增加信号量计数值。 在这种情况下，希望在创建信号量时计数值等于最大计数值。 

信号量相关的API函数列表可以参阅用户文档的[信号量/互斥量](https://freertos.org/a00113.html)部分。FreeRTOS/Demo/Common/Minimal目录中的文件通过多个例程展示其用法。注意，中断不得使用不以“FromISR”结尾的API函数。 
